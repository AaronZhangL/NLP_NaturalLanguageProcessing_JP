
【人工知能】自然言語処理による重要語・人名・地名・組織名・機械要約と再帰的ニューラルネットワークの構築

######################################################
#自然言語処理解析システム
#
#   "Author"  suzuki.iichiro@kyodonews.jp
#   "perlMan" horiuchi.kotaro
#   "pipeMan" kanazawa.hayato
#   "awkMan"  sugai.takayuki
#   "graphMan" akasaki.haruka
#
#1. 単一テキストを対象にした重要箇所抽出による要約アルゴリズムについて
#
#  要約手法１
#  連接情報を使わずに複合名詞（専門用語）の頻度で重み付けによる重要箇所抽出
#  [抽出のアルゴリズムについて]
#      重要度計算において、複合語の重みを使わず、重要度を用語の出現頻度で
#      計算する。ただし、用語が他の用語の一部として現れた場合もカウントす
#      る。  ＊Term Frequency(TF)による重要度計算
#      ＊ＴＦ処理：重要語の頻度をより詳しく見る
#        例えば、「大学 野球」の使用回数が２回だとして、
#        他に「大学 野球 秋季 リーグ」が１回 「大学 野球 リーグ」が
#        ２回使われていると、「大学 野球」は「大学 野球 秋季 リーグ」
#        「大学 野球 リーグ」の一部を構成しているので、「大学 野球」
#        の２回の他「大学 野球 秋季 リーグ」１回、 「大学 野球 リーグ」
#        ２回を足し頻度５とする  
#  要約手法２
#  連接情報を使わずに名詞の頻度で重み付けによる重要箇所抽出
#      [抽出のアルゴリズムについて]
#      重要度計算において、複合語の重みを使わず、重要度を用語の出現頻度で計算す
#      る。＊Frequencyによる重要度計算 
#
#  要約手法３
#  連接情報＋各単名詞の延べ数による重要箇所抽出
#      重要度計算において、連接語の重みを連接した単語の延べ数で計算する。例えば、
#      統計データで「大学」という語が「野球」の前に２回、「駅伝」の前に３回連接
#      したとすると。連接語の重みは次のとおり計算される。＊「大学」:５回 （「大
#      学野球」２回  ＋  「大学駅伝」３回） 
#
#  要約手法４
#  連接情報＋各単名詞の異なり数による重要箇所抽出
#
#  要約手法５
#  連接情報＋各単名詞のエントロピーのべき乗の合計による重要箇所抽出
#      [抽出のアルゴリズムについて]
#      重要度計算において、複合語の重みをパープレキシティで計算する。パープレキ
#      シティは情報理論で使われる指標で、本システムでは各単名詞に「情報理論的に
#      見ていくつの単名詞が連接可能か」を示している。これは、以下のようにして求
#      まる単名詞のエントロピーを元に、２のべき乗することで求められる。連接する
#      語のそれぞれの出現確率をP1～Pnとおくと、エントロピーの計算は次のように示
#      せる。なお対数の底は２である。
#      ＊(-1 * P1 * log(P1)) + (-1 * P2 * log(P2)) ....... + (-1 * Pn * log(Pn))
#              
#      例えば、統計データで、「大学」という語が「野球」の前に２回、「駅伝」の
#      前に３回連接（あわせると計５回連接）したとすると。単名詞のエントロピーは
#      次のとおりになる。出現確率は「大学野球」が 2/5, 「大学駅伝」が 3/5
#      である。 
#        ＊(-2/5 * log(2/5)) + (-3/5 * log(3/5))
#          「大学」13回   （「大学野球」2^2回  ＋  「大学駅伝」3^2回）
#
#  要約手法６
#  重要箇所(連接情報＋各単名詞の延べ数)＋人名・地名・組織名・係り受け関係のスコ
#  ア・係り受け数・形態素ラティスの重み付けグラフ経路探索アルゴリズムによるオン
#  トロジーを用いた自動要約
#      [抽出のアルゴリズムについて]
#      係り受けリストを組み合わせて作成できるすべての文章に対し、単語毎の重要度、
#      係り受けの重要度、人名／地名／組織の重要度を合算する。
#      これにより最も重要度の高い言葉がつながった文章が作成される。
#
#      (1)単語毎の重要度：上記重要語の抽出アルゴリズムを用いて算出
#      (2)人名／地名／組織／日付の重要度：単語毎に1を加算する
#      (3)係り受けの数：オントロジー解析の結果より算出した単語毎に借り受けられた数を算出
#      (4)係り受けの重要度：cabochaコマンドで出力されたものを用いる
#      (5)タイトル、見出しを元にした重要度：タイトル、見出しより単語毎の重要度を加算する
#      (6)文の位置情報による重要度：記事の前の方に出ている語の重要度を上げ、文の重要度を計算する
#      (7)手がかり表現の重要度：主張、結論、評価など（評価表現）の特別な語を含む文の重要度を加算する
#      (8)単語間のつながりと関係性情報の重要度：高い活性値を得た単語、句、文を重要と見なし加算する
#      (9)テキスト構造の重要度：文間の関係を解析し、重要度を加算する
#
#
#
#  自然言語処理によるテキスト自動要約 一般社団法人 共同通信社 メディアラボ 鈴木  維一郎
#
#  要旨: Webで必要な情報を見つけるという作業は悪夢である。Webで特定の情報を検索
#  していると、膨大な無関係の資料に途方に暮れ、肝心の検索している事項を見落とし
#  てしまう事がよくある。検索は不正確で、多くの場合、何千ものページへのポインタ
#  が返される。さらに求める情報を得るためには、検索された文書全体を読まなければ
#  ならない。本当に関連のあるWebページを見つける事ができたとしても、ページ内の検
#  索が難しかったり、情報が明確でなかったりする場合がある。
#
#  インターネットに情報が溢れる現在、膨大なWebから必要とする情報を効率よく探し出
#  したり、Web上に分散した情報を組み合わせ集約し、自動的に処理したりするための技
#  術が求められている。こうしたセマンティックWebの世界では、人工知能分野で研究さ
#  れてきたオントロジーの研究を取り入れている。こうした技術によりWebは巨大な知識
#  ベースとなり、様々な問題に対して推論を行い、有益な結論を導く事ができるように
#  なる。
#
#  Webは機械が理解可能な情報であり、標準によってきちんと定義され、人と情報の世界
#  においてある種の均衡状態となり、共有知識を介したコミュニケーションのための媒体
#  でなければならない。そのためには情報の把握を手助けしてくれる、情報に関する情報
#  「メタデータ」が必要である。
#
#  文書内からメタデータを効率良く抽出することで、機械が文書の構造および意味的定
#  義を理解し、行間の感情表現を特定し、文書の文脈を理解し、要旨を自動生成する事
#  が可能となる。
#
#  要旨抽出（以降機械要約）の技術は、自然言語処理(NLP Natural Language
#  Proccession)とも言われ、「言語解析」「重要箇所の特定」「言語生成」技術に区分
#  する事が出来る。
#
#    言語解析は次の四つの要素技術に細分化できる
#    １．形態素解析  テキストを品詞に分解する。（chasen/mecab)
#    ２．構文解析  単語間の構文的関係を決定し、その文の構造を決定する。(KNP/Cabocha)    
#    ３．意味解析  単語の語彙（意味）を決定する
#    ４．文脈解析  テキストの構造の決定、照応の解析、省略の補完を行う。
#
#  形態素解析技術により文中の単語は品詞に分解され、それらは一般に文法に基づき、
#  互いに関係を持ち、文にはその結果として構文的な構造が与えられるとされている。
#  たとえば英語の場合、動詞と目的語の名詞句から動詞句が構成され、主語の名詞句と
#  動詞句から文が形成されるという具合である。これら構造を得る処理が構文解析技術
#  である。
#
#  テキスト中の文は、互いに関係づけられており、テキスト全体は構造を持っていると
#  考えられる。その文間の関係を解析し、テキスト全体の構造を得る処理を文脈解析技
#  術という。照応とは、代名詞、定名詞句、「こそあど」と言われる指示詞などが文脈
#  中の別の単語と同じ対象を指示する言語対照である。一般にこの指示対象が何である
#  かは表層の情報からは明かではないため、指示対象を同定する照応解析は重要な問題
#  となる。
#
#  重要文抽出による要約
#  １．何らかの情報を本にして、各文の重要度を計算する。
#  ２．重要度が上位の文から順に、指定された要約率に達するまで文を選択する。
#  おおよそ「なんらからの情報」とは以下の六つが考えられる
#
#  （１）テキスト中の単語の重要度を利用する。(1950-ベイズ)<実装済み>
#    出現頻度(Term Frequency:tf)
#    単語が出現するテキスト数（Document furequency:df)
#    上記二つの掛け合わせ（tf* idf)など様々な単語の重み付け技法が利用できる。
#
#  （２）テキスト中のあるいは段落中での文の位置情報を利用する。(リード)＜実装済み＞
#    たとえば論文には、序論、本論、結論、新聞は、見出し、小見出しのあと、本文が
#    来る事が多い。このようなジャンルにより決まったテキストの構造を重要文抽出に
#    利用する。 
#
#  （３）テキストのタイトルなどの情報を利用する。＜実装済み＞ 
#    テキストに付与されたタイトルを持つ場合、このタイトル、見出しは、ある意味でテキ
#    スト本文の非常に簡潔な要約となっていると考えられる。そこで、タイトル、見出しに
#    現れる内容語を含む文が重要であると考え、タイトル、見出し中の単語を重要文抽出に
#    利用する手法が考えられる。
#
#  （４）テキスト中の手がかり表現を利用する。
#    テキスト中では、重要な文を直接明示する手がかり語が存在すると考えられる。論文な
#    どでは、「本研究では」「とめると」「我々は」などの表現を含む文は、主題を表すと
#    考えられる。
#
#  （５）テキスト中の文あるいは単語間のつながりの情報を利用する＜実装済み＞ 。
#    テキスト中の他の多くの文と強い関連がある文は、テキスト中で比較的中心的な役割を
#    果たしていると考える事が出来る。テキスト中の多くの文と強い関連がある文を重要な
#    文として抽出する手法が考えられる。
#    関連度は、二つの文中の意味的に関連がある単語(引きあいの多い単語)の出現頻度
#    を解析する事が多い、または類義語や同義語などの「川」と「橋」などといった意
#    味的な関連制を利用する事が多い。
#
#  （６）テキスト中の文間の関係を解析したテキスト構造を利用する。＜実装済み＞ 。
#    まず、利点として、長さに応じた要約を、得られた構造木のそれぞれのレベルで作成で
#    きる。テキスト構造に基づいて重要文を抽出しているので、単語の出現頻度などを用い
#    た手法に比べ、一貫性の高い要約が出来る。などである。
#
#  文の構造が得られたとして、どうやって重要な文を選ぶのか。文間の関係、それらは大
#  きく分類するなら、分銅しがたい媼関係、片方が片方よりも重要である関係に分ける事
#  が出来る。例えば、しかしなどが出てくる場合の「対比」、例えば等の「例示」、した
#  がってなどの「理由」、そのほかに、譲歩、正当化、証拠などの文章の意見を抽出し、
#  それら情報の値を要約文抽出の重要度に加えるなどの手法が考えられる。  
#        
#  文単位で抽出する事でテキストを短くする重要文抽出手法について説明、実装してき
#  たが、一文ごとに重要でない箇所を削り、あるいは重要な箇所を抽出し、情報をなる
#  べく減らさずに、テキストを短く表現し直す要約手法「文短縮手法」が今後の研究課
#  題である。
#  不要と思われる文字列を削除したり、表現をより簡潔な別の表現に言い換えるなど、
#  利用用途に応じた文字数、内容に置き換える技術が期待されている。
#  こうした技術発展の先には、機械が複数の文書をひとつの文書に再編成したり、文書
#  のトピックを特定し、同一のトピック群から正当と判断しうる同一テーマを持つ文書
#  を抽出し、文書内の疑問に対する理由を見つけ、応答する事さえも可能となると考え
#  る。
#  キーワードマッチングに変わるインテリジェントな検索、情報検索に変わる問い合わ
#  せ応答、オントロジーマッピングを介した部門間の文書交換や、機械による文書の自
#  動校正・校閲、再編成、さらにはSNSなどの話題や一般市民の意見をモデル化し、さま
#  ざまな問題を解決する糸口を導き出すといったこれまでと全く異なる新しい可能性の
#  実現は私たちのすぐ目の前まできている。
#  暖かくてファジーな右脳化された自分たちと、この明確に定義された左脳の世界を統
#  合しうる最良の方法を見つけなければならない。
#
#  キーワード:自然言語処理、形態素解析、重要語抽出、構文解析、意味解析、自動要約、
#  オントロジー、意見評価、感情表現抽出、カテゴリ分類、クラスタリング分類、セマ
#  ンティックWeb、自由作成要約、複数テキスト要約、セマンティクスの抽出と応用開発、
#  質問応答システム
#
#
#	目次
#	    0. セマンティックスの抽出
#            1. 単一テキストを対象にした重要箇所抽出による要約
#            2. 複数テキストを対象にした重要文抽出による要約
#            3. 単一テキスト、同一トピックの抽象化、言い換えによる要約作成
#            4. 複数テキスト、同一トピックの抽象化、言い換えによる要約作成
#            5. アルゴリズムについて
#            6. APIによる取得方法
#            7. 縦書き表示の充実
#            
#  我々は、新聞を読むとき、まず記事の見出しを見て、その記事の内容を推測し、その
#  記事を読むかどうか決めていると思われる。
#  これは、見出しが、記事の内容を簡潔に示す「要約」になっているからだと言える。
#  研究者の場合、タイトルで当たりをつけた後、論文のアブストラクトを読み、おもし
#  ろそうな論文を探す事は日常当たり前に行っているのではないだろうか。このよう
#  に、要約はわれわれの身近でずっと前から役に立っていたという事ができる。
#  近年検索エンジンが広く利用されるようになってきているが、システムが提示する検
#  索結果には、Webページの内容を短く紹介したものが併せて提示される場合もあるよう
#  である。これは、リンク先のページがユーザーの欲しいものかどうかを要約を見て判
#  断してもらおうという趣旨でつけられていると思われる．
#  ニュースの文字放送では、ニュースの原文自体ではなく、その要約と言えるような形
#  でニュースが配信されている。
#  ユーザーが大量の関連情報の中から必要な情報に効率的にアクセスするのを支援する
#  技術が求められている。さらに、アクセスした文書から必要としている内容を効率的
#  に特定するために、自動要約技術によって読み手の文書の量を制御し、短い時間で的
#  確に内容を把握する必要性が高くなっている。
#  テキスト自動要約とは、元のテキスト原文の内容をより短いテキストで簡潔にまとめ
#  る処理、あるいは、その処理の結果のテキストの事を言う。
#  テキスト情報から重要な情報のみを選択して提供し、要点の迅速把握を支援する技術
#  であり、読み手が読むテキストの量を制御できる事を目標としている。
#
#
#１．extract（抽出）とabstract（それ以外）
#===============================
#  テキスト自動要約は時に、情報抽出と対で（あるいは対比して）述べられる事があ
#  る。どちらもテキスト中の重要な情報を抜き出すという点では共通するが、情報抽出
#  は、あらかじめ決められた「枠」を埋める形で必要な情報を抜き出す。
#  情報検索結果のテキストを自動要約したものをユーザーに提示し、ユーザーは、シス
#  テムの提示した結果が適切なものであるかどうかを要約を見て判断する。同様に、テ
#  キスト分類あるいはテキストクラスタリングにより、分類、グループ化されたテキス
#  ト集合を入力として、テキスト集合の要約を作成するテキスト自動要約もあり得る。
#  質問応答はある意味で「究極の」情報アクセス技術であり、情報検索、情報抽出、テ
#  キスト自動要約など、現在研究されている他の情報アクセス技術は、質問応答技術の
#  要素技術と位置づけられないわけではない。
#
#  重要文抽出による要約
#    １．何らかの情報を元にして、各文の重要度を計算する
#    ２．重要度が上位の文から順に、指定された要約率に達するまで文を選択する。
#
#    アプローチ
#    １．テキスト中の単語の重要度を利用する★
#      テキスト中による出現する内容語はテキストの主題を示す傾向があるという仮説が情
#      報検索の分野などではしばしば用いられている。
#      テキスト中での出現頻度（Term frequency : tf法 )
#      出現頻度に加えてｋ単語が出現するテキスト数（document fequency : tf*idf法）
#      要約対象の文書中に現れる単語の頻度を計算し、その順に重要語を定義する方法。頻
#      度が多い語は、その文章の主題に大きく関係していいる後であるとする仮定の下に、
#      主に名詞の頻度を計算し、その語が多く含まれる文を重要文として抽出する方法がと
#      られている。
#      重要文抽出法のデメリットとしてテキストが複数の話題を含む場合に問題が生じる事
#      が指摘されている。
#
#    ２．テキスト中あるいは段落中での文の位置情報を利用する★★★★
#      　テキストは、そのジャンルに依存して、ある程度構造に規則性があると通常考えられ
#      ている。論文には、序論、本論結論、新聞は、見出し、小見出し、本文。テキスト中
#      で重要な文が出現する位置は、ある程度予測可能であると仮定して、テキスト中での
#      文の位置を元に、その文の重要度を計算する手法が考えられている。新聞の記事は、
#      「見出し」「小見出し」「本文」などのような、ある程度決まった構造を持ってい
#      る。また、内容のジャンルによって何らかの構造上の特等がある場合がある。新聞を
#      要約するときはタイトルや、記事の前の方に出ている語の重要度を上げ、文の重要度
#      を計算する。
#
#    ３．見出し、タイトルなどの情報を利用する★★
#      　タイトル、見出しは、ある意味でテキスト本文の時報に簡潔な要約となっていると考
#      えられる。そこで、タイトル、見出しに現れる内容語を含む文が重要であると考え、
#      タイトル、見出し中の単語を重要文抽出に利用する手法が考えられている。
#
#    ４．テキスト中の手がかり表現を利用する★★★
#      　論文では、「本研究では」「まとめると」「われわれは」などの表現を含む文は論文
#      の主題を表すと考えられる。主張、結論、評価などの特別な語を含む文を重要分とす
#      る。「欲しい」「望ましい」「要するに」「まとめると」等が考えられる。このよう
#      な文書の重要な記述部分を示す語を含む文や、その文に含まれる単語の重要度を他の
#      単語より上げる方法がある。
#
#    ５．テキスト中の文あるいは単語間のつながりと関係性情報を利用する。
#      　テキスト中の他の多くの文と強い関連がある文は、テキスト中で中心的な役割を果た
#      していると考える事ができそうである。テキスト中の多くの文と強い関連がある文を中
#      ような文として抽出する手法。意味的に関連があるというのは、類義語（synonym）や連
#      想により意味的な関連があると思われるような場合を言う。類義語の情報を得るにはシ
#      ソーラス（類語辞典）を利用する事が多い。接続詞、照応関係などから文間・単語間の
#      つながりと、その関係の解析を行ってい要約する方法。文書を意味ネットワーク化し
#      て、その上でコネクショニスト・モデルを用いて、接点の活性値の収束値を重要度とし
#      て計算する要約方法。
#
#      　Skorokhod ko は文をノード、文間の関係をリンクするとするグラフをテキストから
#      構成し、多くの文と関係のある文が重要であるという考えに基づき、重要文を抽出す
#      る手法を示している。文中の単語が同一概念を参照しているような文間にリンクがあ
#      るとしている。
#
#      　マニラは、テキスト中の単語などがノードであり、その間の隣接制、構文的関係、
#      共参照関係、語彙的類似性などの関係をアークで表現したグラフでテキストを表現
#      し、このグラフ中での活性値の伝搬により、高い活性値を得た単語、句、文を重要と
#      見なす重要文抽出手法を示している。
#
#      ・他の多くのノードとリンクで結ばれているノードは（段落は）、複数の段落に渡る
#        主題について議論していると考え抽出する。
#      ・最初のノード（先頭段落）あるいは、他のノードとのリンクが多いノードから開始
#        し、それよりもテキスト中で後ろにある。もっとも類似するノードを再帰的に抽出する。
#      ・テキストがセグメント（ある話題のまとまり）に分割できるのであれば、セグメン
#        トからまんべんなく段落を抽出するのがテキスト全体をカバーする要約を作る上でよ
#        いと考えられている。
#      ・新しい話題が始まると、通常その先頭の段落で、その主題について述べる事が多
#        い。セグメントの先頭の段落を抽出すると良い事になる。
#  
#    ６．テキスト中の文間の関係を解析したテキスト構造を利用する。
#      文同士が対等な関係、または片方が片方よりも重要である関係
#      「例示」たとえば「理由」したがってなどの意味的な表現はより重要である。
#
#    ７．オントロジー
#      　システムは内容を理解した上で、重要な部分を要約しているわけではない。内容の理
#      解そのものが、現在のコンピュータで難しい事が原因である。構文解析や意味解析の手
#      法が不足しているだけでなく、人間の持っている常識や当該分野の知識などが不足して
#      いるのである。このような知識の不足に対して、オントロジーの研究が進められてい
#      る。これは概念辞書とも言われるもので、人間の持っている知識を構造化してコン
#      ピュータで扱えるよう電子化したデータベースである。＜いまここ＞
#
#
###############################################################################
# 入力ファイル in 
#title=早大３連覇  斎藤が１５奪三振、初完封  東京六大学野球&body=東京六大学野球秋季リーグは３０日、神宮球場で最終週の早大—慶大３回戦があり、早大が斎藤（１年、早稲田実）の活躍で慶大に７—０で大勝し、３季連続４０度目の優勝を果たした。勝ち点４で明大と並んだが、勝率で上回った。早大は１１月１０日開幕の明治神宮大会への出場も決めた。   斎藤はスライダーやツーシームなどの変化球がさえ、リーグ戦初完封。被安打４で１５奪三振の力投で今季４勝目を挙げた。打線は１回、松本（３年、千葉経大付）の適時打と本田（４年、智弁和歌山）の３点二塁打で４点を先取し、その後も加点した。慶大は３連投のエース加藤幹（４年、川和）が力尽きた。&perMax=50&summaxLength=
#
# 実行例
# $ time ./MAIN.SH < in
#
# 実行結果
# 1. コンソールに出力されます
# 2. index.htmlが生成されてオントロジーレイアウトが表現されます。
